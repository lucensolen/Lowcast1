<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LOWCAST // Gate 0.2</title>

<style>
body{
 margin:0;background:#000;color:#e0e0e0;font-family:'Inter',sans-serif;
 display:flex;justify-content:center;align-items:center;height:100vh;
 opacity:0;animation:fadeIn 1.5s ease forwards;
}
@keyframes fadeIn{to{opacity:1;}}

.beam{
 position:absolute;width:2px;height:80vh;
 background:linear-gradient(transparent,rgba(255,255,255,0.6),transparent);
 opacity:1;
}

.container{
 text-align:center;
 z-index:1;
 position:relative;
 letter-spacing:2px;
}

.reveal{opacity:0;transform:translateY(8px);animation:upFade 1.2s ease forwards;}
@keyframes upFade{to{opacity:1;transform:translateY(0);}}
.delay1{animation-delay:0.3s;} .delay2{animation-delay:0.6s;}
.delay3{animation-delay:0.9s;} .delay4{animation-delay:1.2s;}

.info-block span{
 filter:blur(3px);
}

.signup-btn{
 margin-top:10px;padding:8px 20px;border:1px solid #fff;
 background:transparent;color:#fff;cursor:pointer;letter-spacing:2px;
 transition:0.2s ease;
}
.signup-btn:hover{background:rgba(255,255,255,0.15);}

.locked {
    border-color: #ff1433 !important;
    color: #ff1433 !important;
    pointer-events: none;
}

.overlay{
 position:fixed;inset:0;backdrop-filter:blur(6px);
 background:rgba(0,0,0,0.6);display:none;justify-content:center;align-items:center;
 z-index:9999;
}
.signup-box{
 background:rgba(20,20,20,0.8);padding:30px;border:1px solid #333;
 width:300px;text-align:center;border-radius:6px;
 position:relative;
 z-index:10000;
}
.signup-box input{
 width:100%;padding:10px;margin-top:12px;background:#111;
 border:1px solid #444;color:white;
}
.signup-box button{
 margin-top:18px;width:100%;padding:12px;background:#fff;color:#000;
 border:none;font-weight:bold;cursor:pointer;
}
.close{margin-top:12px;color:#aaa;cursor:pointer;}

@keyframes redPulse {
    0% { opacity: 0.4; }
    50% { opacity: 1; }
    100% { opacity: 0.4; }
}
.success-pulse {
    color: #ff1433;
    letter-spacing: 3px;
    margin-top: 16px;
    animation: redPulse 2s infinite ease-in-out;
}

.countdown{font-size:2.2rem;margin:25px 0;font-weight:bold;}

.access-btn{
 padding:14px 36px;font-size:1rem;letter-spacing:2px;
 background:transparent;border:1px solid #fff;color:#fff;cursor:pointer;
}
.access-btn:hover{background:rgba(255,255,255,0.12);}
</style>
</head>

<body>

<div class="beam"></div>

<div class="container">
    <h1 class="reveal delay1">LOWCAST 001</h1>
    <div class="subline reveal delay2">CHELTENHAM // 2025</div>

    <div class="info-block reveal delay3">
        <strong>VENUE:</strong> <span>[VENUE NAME HERE]</span><br>
        <strong>DATE:</strong> <span>[DATE HERE]</span><br>
        <strong>TIME:</strong> <span>[TIME RANGE HERE]</span><br>
    </div>

    <button class="signup-btn reveal delay3" id="openSignup">GET NOTIFIED</button>

    <div class="countdown reveal delay3" id="countdown">00 : 00 : 00 : 00</div>

    <button class="access-btn reveal delay4" id="accessBtn">ENTER THE CHAMBER</button>
</div>

<div class="overlay" id="overlay">
    <div class="signup-box">
        <h2 id="signupTitle">TUNE IN</h2>
        <p id="signupText">Get updates.</p>

        <div id="signupFields">
            <input type="email" id="emailInput" placeholder="Email address">
            <input type="text" id="phoneInput" placeholder="Phone (optional)">
            <button id="submitSignup">SUBMIT</button>
        </div>

        <div id="successMessage" style="display:none; text-align:center;">
            <div class="success-pulse">LOCKED IN</div>
            <button id="enterDirect" style="margin-top:20px;width:100%;padding:12px;background:#ff1433;color:#000;border:none;font-weight:bold;cursor:pointer;">
                ENTER CHAMBER
            </button>
        </div>

        <div class="close" id="closeOverlay">Close</div>
    </div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzKRWhjDbd5SbQ_2l8flri__AUZ1SkC8IW-sIqBBEjzu9rTd_NLGInFx7XXgxB6YRX2ig/exec";

// ----------------------------------------------------
// UNIFIED LOWCAST ID (shared across gate/chamber/etc.)
// ----------------------------------------------------
let LOWCAST_ID = localStorage.getItem("lowcast.id");
if (!LOWCAST_ID) {
    LOWCAST_ID = "lowcast_" + Math.random().toString(36).substring(2) + Date.now();
    localStorage.setItem("lowcast.id", LOWCAST_ID);
}

// ----------------------------------------------------
// RESTORE LOCKED STATE
// ----------------------------------------------------
const notifBtn = document.getElementById("openSignup");

if (localStorage.getItem("lowcast.notified") === "true") {
    notifBtn.textContent = "LOCKED IN";
    notifBtn.classList.add("locked");
}

// ----------------------------------------------------
// SUBMIT SIGNUP â†’ send to Google Sheets
// ----------------------------------------------------
document.getElementById("submitSignup").addEventListener("click", () => {
    const email = document.getElementById("emailInput").value.trim();
    const phone = document.getElementById("phoneInput").value.trim();

    fetch(API_URL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            id: LOWCAST_ID,
            email: email,
            phone: phone,
            callsign: "",      // kept for compatibility
            name: "",          // available if you want to use later
            mix: "",
            note: "",
            gate: "Gate 0.2"   // unchanged label
        })
    });

    localStorage.setItem("lowcast.notified", "true");

    document.getElementById("signupFields").style.display = "none";
    document.getElementById("signupTitle").textContent = "TUNED";
    document.getElementById("signupText").textContent = "";
    document.getElementById("successMessage").style.display = "block";

    notifBtn.textContent = "LOCKED IN";
    notifBtn.classList.add("locked");
});

// ----------------------------------------------------
document.getElementById("enterDirect").addEventListener("click", () => {
    window.location.href = "chamber.html";
});

// ----------------------------------------------------
openSignup.addEventListener("click",()=>{overlay.style.display="flex";});
closeOverlay.addEventListener("click",()=>{overlay.style.display="none";});

// ----------------------------------------------------
// COUNTDOWN (unchanged)
// ----------------------------------------------------
const countdown = document.getElementById("countdown");
const launchDate=new Date("2025-12-30T22:00:00").getTime();
function updateCountdown(){
 const now=new Date().getTime();
 const dist=launchDate-now;
 if(dist<0){countdown.innerHTML="00 : 00 : 00 : 00";return;}
 const d=Math.floor(dist/(1000*60*60*24));
 const h=Math.floor((dist%(1000*60*60*24))/(1000*60*60));
 const m=Math.floor((dist%(1000*60*60))/(1000*60));
 const s=Math.floor((dist%(1000*60))/1000);
 countdown.innerHTML=`${String(d).padStart(2,'0')} : ${String(h).padStart(2,'0')} : ${String(m).padStart(2,'0')} : ${String(s).padStart(2,'0')}`;
}
setInterval(updateCountdown,1000);

const accessBtn = document.getElementById("accessBtn");
accessBtn.addEventListener("click",()=>{window.location.href="chamber.html";});
</script>

</body>
</html>
